<div
  class="search-bar-container"
  matAutocompleteOrigin
  #origin="matAutocompleteOrigin">
  <sg-input-field
    class="search-input"
    leadingIcon="search"
    [disabled]="false"
    [size]="inputHeight">
    <input
      #inputElement
      sgInput
      placeholder="{{ searchPlaceholder }}"
      [matAutocomplete]="searchHistory"
      [matAutocompleteConnectedTo]="origin"
      (input)="onSearchInputChange($event)"
      (keydown)="onInputKey($event)"
      [value]="searchValue" />
    <mat-autocomplete
      #searchHistory="matAutocomplete"
      panel="acpanel"
      (optionSelected)="onHistorySelection($event)">
      <div class="autocomplete-label" *ngIf="historyItems.length">
        {{ autocompleteTitle }}
      </div>
      @for (historyItem of displayedHistory; track historyItem) {
        <mat-option [value]="historyItem" class="autocomplete-option"
          ><mat-icon class="history-icon">schedule</mat-icon
          >{{ historyItem }}</mat-option
        >
      }
    </mat-autocomplete>
  </sg-input-field>
  <button
    *ngIf="showCloseButton"
    class="close-button"
    sg-button
    variant="icon-only"
    icon="close"
    (click)="handleClear()"></button>
</div>
