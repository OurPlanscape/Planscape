<section>Selected Stands:</section>

<div>
  <button (click)="toggleMapDrag()">
    Toggle map drag {{ mapDragging ? 'off' : 'on' }}
  </button>

  <button (click)="assignTreatment('treatment-1')">Assign treatment 1</button>
  <button (click)="assignTreatment('treatment-2')">Assign treatment 2</button>
  <button (click)="assignTreatment('treatment-3')">Assign treatment 3</button>
  <button (click)="clearTreatments()">clear all</button>
</div>

<section>
  <mgl-map
    (mapLoad)="maplibreMap = $event"
    [style]="
      'https://tiles.stadiamaps.com/styles/alidade_smooth.json?api_key=' + key
    "
    [zoom]="[7]"
    [center]="[-122.5, 37]"
    [dragPan]="mapDragging"
    [interactive]="true"
    (mapMouseDown)="onMapMouseDown($event)"
    (mapMouseMove)="onMapMouseMove($event)"
    (mapMouseUp)="onMapMouseUp($event)">
    <mgl-vector-source
      id="stands"
      [tiles]="[vectorLayerUrl]"></mgl-vector-source>

    <mgl-layer
      id="outline-layer"
      type="line"
      source="stands"
      [paint]="{
        'line-color': 'black',
        'line-width': 3
      }"
      sourceLayer="project_area_outline"></mgl-layer>

    <mgl-layer
      id="stands-layer"
      type="fill"
      source="stands"
      [paint]="paint"
      sourceLayer="treatment_plan_prescriptions"
      (layerClick)="clickOnStand($event)"></mgl-layer>

    <mgl-layer
      id="stands-layer-selected"
      type="fill"
      source="stands"
      [paint]="{
        'fill-color': 'green',
        'fill-opacity': 0.5
      }"
      sourceLayer="treatment_plan_prescriptions"
      [filter]="mapFilter"></mgl-layer>

    <mgl-geojson-source id="rectangle-source">
      <mgl-feature [geometry]="rectangleGeometry"></mgl-feature>
    </mgl-geojson-source>

    <mgl-layer
      id="selection-rectangle"
      type="line"
      source="rectangle-source"
      [paint]="{
        'line-color': '#0000FF',
        'line-width': 2
      }"></mgl-layer>
  </mgl-map>
</section>
