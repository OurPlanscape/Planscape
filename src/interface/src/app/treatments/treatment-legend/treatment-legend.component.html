<sg-modal
  class="treatment-legend"
  title="Treatment Legend"
  [hasFooter]="false"
  [scrollableContent]="false"
  width="xsmall"
  (clickedClose)="handleClose()">
  <div modalBodyContent class="legend-body">
    <div class="legend-no-expander">
      <div class="no-treatment-row">
        <sg-treatment-type-icon [treatment]="null"></sg-treatment-type-icon>
        <div>No Treatment</div>
      </div>
    </div>
    <mat-expansion-panel
      class="legend-expander-panel"
      [expanded]="defaultExpanded">
      <mat-expansion-panel-header class="legend-expander-heading">
        <div class="expander-heading-content">
          <mat-icon class="material-symbols-outlined expander-heading-icon"
            >medication_outline</mat-icon
          >
          Single Treatment
        </div>
      </mat-expansion-panel-header>
      <div class="legend-section">
        <ng-container *ngFor="let tx of singleRxTypes">
          <div class="legend-row" *ngIf="inDisplayedTreatments(tx.type)">
            <sg-treatment-type-icon
              [treatment]="tx.type"></sg-treatment-type-icon>
            <div class="legend-text">{{ tx.value }}</div>
          </div>
        </ng-container>
      </div>
    </mat-expansion-panel>
    <mat-divider class="tx-divider"></mat-divider>
    <mat-expansion-panel
      class="legend-expander-panel"
      [expanded]="defaultExpanded">
      <mat-expansion-panel-header class="legend-expander-heading">
        <div class="expander-heading-content">
          <mat-icon class="material-symbols-outlined expander-heading-icon"
            >repeat</mat-icon
          >Treatment Sequencing
        </div>
      </mat-expansion-panel-header>
      <div class="legend-section">
        <ng-container *ngFor="let tx of sequenceRxTypes">
          <div class="legend-row" *ngIf="inDisplayedTreatments(tx.type)">
            <sg-sequence-icon [action]="tx.type"></sg-sequence-icon>
            <sg-treatment-type-icon
              [treatment]="tx.type"></sg-treatment-type-icon>
            <div class="legend-text">{{ tx.value.details }}</div>
          </div>
        </ng-container>
      </div>
    </mat-expansion-panel>
  </div>
</sg-modal>
