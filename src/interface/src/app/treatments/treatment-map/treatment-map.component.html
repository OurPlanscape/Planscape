<app-map-controls
  [mapDragging]="mapDragging"
  (toggleDrag)="mapDragging = $event"></app-map-controls>
<mgl-map
  *ngIf="bounds$ | async"
  (mapLoad)="mapLibreMap = $event"
  [style]="(styleUrl$ | async) || ''"
  [fitBounds]="(bounds$ | async) || undefined"
  [fitBoundsOptions]="{ padding: 20 }"
  [dragPan]="mapDragging"
  [minZoom]="7"
  [maxZoom]="17"
  [boxZoom]="false"
  [interactive]="true"
  [pitchWithRotate]="false"
  (mapMouseDown)="onMapMouseDown($event)"
  (mapMouseMove)="onMapMouseMove($event)"
  (mapMouseUp)="onMapMouseUp($event)">
  <app-map-stands
    [mapLibreMap]="mapLibreMap"
    [treatedStands]="(treatedStands$ | async) || []"
    [selectStart]="start ? start.point : null"
    [selectEnd]="end ? end.point : null"></app-map-stands>

  <app-map-rectangle
    [mapLibreMap]="mapLibreMap"
    [start]="start ? start.lngLat : null"
    [end]="end ? end.lngLat : null"></app-map-rectangle>

  <app-map-project-areas
    *ngIf="scenarioId"
    [mapLibreMap]="mapLibreMap"
    [scenarioId]="scenarioId"></app-map-project-areas>
</mgl-map>
