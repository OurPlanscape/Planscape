<ng-container *ngIf="prescriptions$ | async as prescriptions">
  <div *ngIf="prescriptions.length < 1" class="no-treatments-blurb">
    <mat-icon class="no-treatments-icon material-symbols-outlined"
      >medication
    </mat-icon>
    <div class="no-treatments-header">No Treatments Yet</div>
    <div class="no-treatments-text">
      Start applying treatments to each stand
    </div>
  </div>

  <div *ngIf="prescriptions.length > 0" class="treatments-tab-content">
    <div class="side-search-container">
      <sg-search-bar
        class="search-bar"
        [debounceInterval]="160"
        searchPlaceholder="Search treatment prescriptions"
        [inputHeight]="'regular'"
        (searchString)="setSearchString($event)"></sg-search-bar>
    </div>
    <div class="slider-container">
      <sg-opacity-slider
        title="Treatment opacity"
        [minValue]="0"
        [maxValue]="1"
        [step]="0.01"
        [sliderValue]="(opacity$ | async) || 0"
        (valueChange)="handleOpacityChange($event)"></sg-opacity-slider>
    </div>
    <div
      class="expanders-container"
      *ngIf="filteredPrescriptions$ | async as filteredRxs">
      <ng-container
        *ngIf="
          searchString !== '' && searchString !== null && filteredRxs.length > 0
        ">
        <div class="results-count">
          {{ filteredRxs.length }} results for &quot;{{ searchString }}&quot;
        </div>
      </ng-container>
      <sg-treatment-expander
        *ngFor="let tx of filteredRxs"
        [treatmentType]="tx.type"
        [action]="tx.action"
        [areaAcres]="tx.area_acres"
        [treatedStandCount]="tx.treated_stand_count"
        [standIds]="tx.stand_ids"
        (stateToggle)="highlightPrescriptions(tx)"
        [searchString]="searchString">
        {{ tx.type }}
      </sg-treatment-expander>
      <ng-container
        *ngIf="
          searchString !== '' &&
          searchString !== null &&
          filteredRxs.length === 0
        ">
        <div class="no-results-box">
          <mat-icon class="material-symbols-outlined no-results-icon"
            >find_in_page</mat-icon
          >
          <div class="no-results-title">
            No results for &quot;{{ searchString }}&quot;
          </div>
          <div class="no-results-detail">
            No results match the search criteria provided. Check your search for
            typos or try a different search term.
          </div>
        </div>
      </ng-container>
    </div>
  </div>
</ng-container>
