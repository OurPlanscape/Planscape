<app-nav-bar area="NEW_SCENARIO"></app-nav-bar>
<!--New scenario ui flow-->
<sg-steps-nav
  [steps]="steps"
  [selectedIndex]="localIndex"
  [allowNavigation]="true"
  [linear]="true"
  (selectionChange)="
    stepsComponent && (stepsComponent.selectedIndex = $event)
  "></sg-steps-nav>
<section class="container" [ngClass]="{ first: isFirstIndex$ | async }">
  <sg-steps
    #stepsComponent
    class="new-scenario-ui"
    [ngClass]="{ 'full-screen-steps': isFirstIndex$ | async }"
    [showStepIndex]="false"
    linear
    finishLabel="Save & Run Scenario"
    continueLabel="Save & Continue"
    [save]="saveStep.bind(this)"
    (selectedIndexChange)="stepChanged($event)"
    (finished)="onFinish()"
    [outerForm]="form"
    [savingStep]="(loading$ | async) ?? false"
    [disabled]="(loading$ | async) || false">
    <app-scenario-summary
      sharedHeading
      *ngIf="(isFirstIndex$ | async) === false"
      [title]="scenarioName"
      [standSize]="(standSize$ | async) || null"
      [treatmentGoal]="
        (treatmentGoalName$ | async) || ''
      "></app-scenario-summary>

    <sg-step class="full-screen-step">
      <app-step1-with-overview></app-step1-with-overview>
    </sg-step>
    <sg-step>
      <app-exclude-areas-selector></app-exclude-areas-selector>
    </sg-step>
    <sg-step>
      <app-stand-level-constraints></app-stand-level-constraints>
    </sg-step>
    <sg-step>
      <app-treatment-target></app-treatment-target>
    </sg-step>
  </sg-steps>

  <app-scenario-map
    *ngIf="(isFirstIndex$ | async) === false"></app-scenario-map>
</section>
