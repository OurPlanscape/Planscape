<div class="root-container">
  <app-plan-unavailable *ngIf="planNotFound"></app-plan-unavailable>
  <ng-container *ngIf="!planNotFound && plan">
    <router-outlet #outlet="outlet"></router-outlet>

    <div class="plan-summary-panel" *ngIf="!(viewScenario$ | async) && currentPlanStep === PlanStep.Overview">
      <summary-panel [plan]="currentPlan$ | async"></summary-panel>
    </div>
    <mat-divider [vertical]="true" *ngIf="!(viewScenario$ | async)"></mat-divider>
    <div class="plan-content" *ngIf="!(viewScenario$ | async)">
      <app-plan-navigation-bar (backToOverviewEvent)="currentPlanStep = PlanStep.Overview" *ngIf="currentPlanStep > PlanStep.Overview"></app-plan-navigation-bar>
      <div class="plan-content-inner">
        <app-plan-overview
          [plan$]="currentPlan$"
          (createScenarioEvent)="currentPlanStep = PlanStep.CreateScenarios"
          *ngIf="currentPlanStep === PlanStep.Overview"></app-plan-overview>
        <ng-container *ngIf="currentPlanStep > 0">
          <div class="plan-map-container">
            <app-plan-map [plan]="currentPlan$" [mapId]="'planning-map'" [mapPadding]="[700, 0]"></app-plan-map>
          </div>
          <div class="plan-content-panel">
            <app-create-scenarios [plan$]="currentPlan$" [planningStep]="currentPlanStep"
              (changeConditionEvent)="changeCondition($event)" (drawShapesEvent)="drawShapes($event)">
            </app-create-scenarios>
          </div>
        </ng-container>
      </div>
    </div>
  </ng-container>
</div>
