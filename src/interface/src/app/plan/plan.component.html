<app-nav-bar
  (goBack)="goBack()"
  [breadcrumbs]="(breadcrumbs$ | async) || []"
  [area]="(area$ | async) || 'SCENARIOS'"></app-nav-bar>
<div class="root-container">
  <app-resource-unavailable
    *ngIf="planNotFound"
    resource="plan"></app-resource-unavailable>
  <ng-container *ngIf="currentPlan$ | async as plan">
    <div class="plan-summary-panel" *ngIf="showOverview$ | async">
      <mat-tab-group
        mat-align-tabs="start"
        mat-stretch-tabs
        disablePagination="true">
        <mat-tab label="ABOUT">
          <app-area-details [plan]="plan"></app-area-details>
        </mat-tab>
        <mat-tab label="NOTES">
          <app-area-notes [plan]="plan"></app-area-notes>
        </mat-tab>
      </mat-tab-group>
    </div>
    <mat-divider [vertical]="true" *ngIf="showOverview$ | async"></mat-divider>
    <div
      class="plan-content"
      [ngClass]="{ 'with-overview': showOverview$ | async }">
      <app-plan-overview
        [plan$]="currentPlan$"
        *ngIf="showOverview$ | async"></app-plan-overview>
      <ng-container *ngIf="(showOverview$ | async) === false">
        <div class="plan-content-panel">
          <router-outlet #outlet="outlet"></router-outlet>
        </div>
        <div class="plan-map-container">
          <app-goal-overlay></app-goal-overlay>
          <app-plan-map
            [plan]="currentPlan$ | async"
            [mapId]="'planning-map'"
            [mapPadding]="[0, 0]"
            [showLayerSwitcher]="true"
            [showAttributionAndZoom]="true"></app-plan-map>
        </div>
      </ng-container>
    </div>
  </ng-container>
</div>
